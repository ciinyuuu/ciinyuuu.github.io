<!doctype html>
<html>
  <head>
    <meta charset = "utf-8">
    <title>ã„Ÿå˜¿å˜¿</title>
    <link rel="icon" href="cute-kawaii-cat-holding-open-260nw-2670375197.webp">
  </head>
  <body>
      hello world
  </body>
</html>
let used = [];
let angle = 0;
let soundOn = true; // ðŸ”Š éŸ³æ•ˆç‹€æ…‹

function toggleSound() {
  soundOn = !soundOn;
  document.getElementById("soundBtn").innerText =
    soundOn ? "ðŸ”Š éŸ³æ•ˆï¼šé–‹" : "ðŸ”‡ éŸ³æ•ˆï¼šé—œ";
}

function spin() {
  let input = document.getElementById("options").value.trim();
  let mode = document.getElementById("mode").value;
  let options = input.split("\n").filter(x => x !== "");

  if (mode === "odd") {
    options = options.filter(x => !isNaN(x) && x % 2 === 1);
  }

  if (mode === "even") {
    options = options.filter(x => !isNaN(x) && x % 2 === 0);
  }

  if (mode === "noRepeat") {
    options = options.filter(x => !used.includes(x));
  }

  if (options.length === 0) {
    alert("æ²’æœ‰å¯æŠ½çš„é¸é …");
    return;
  }

  // ðŸŽ¯ æŠ½çµæžœ
  let pick = options[Math.floor(Math.random() * options.length)];
  if (mode === "noRepeat") {
    used.push(pick);
  }

  // ðŸ”Š è½‰å‹•éŸ³æ•ˆ
  if (soundOn) {
    let spinSound = document.getElementById("spinSound");
    spinSound.currentTime = 0;
    spinSound.play();
  }

  // ðŸŽ¡ è¼ªç›¤æ—‹è½‰
  angle += 360 * 5 + Math.floor(Math.random() * 360);
  document.getElementById("wheel").style.transform =
    `rotate(${angle}deg)`;

  // â±ï¸ çµæžœé¡¯ç¤º + ä¸­çŽéŸ³æ•ˆ
  setTimeout(() => {
    document.getElementById("result").innerText = "ðŸŽ‰ æŠ½åˆ°ï¼š" + pick;

    if (soundOn) {
      let winSound = document.getElementById("winSound");
      winSound.currentTime = 0;
      winSound.play();
    }
  }, 3000);
}
